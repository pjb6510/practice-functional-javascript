<body>
  <script src="../common/log.js"></script>
  <script src="../common//functions.js"></script>
  <script>
    const delay1000 = (n) =>
      new Promise((resolve) => setTimeout(() => resolve(n), 1000));

    const add = (a, b) => a + b;

    // filter에 의해 걸러져서 nop reject로 오는 값들이 콘솔에 에러메시지를 던질 수 있음.

    // _.go(
    //   [1, 2, 3, 4, 5, 6, 7, 8, 9],
    //   L.map((n) => {
    //     log("map", n);
    //     return delay1000(n ** 2);
    //   }),
    //   L.filter((n) => {
    //     log("filter", n);
    //     return delay1000(n % 2);
    //   }),
    //   L.map((n) => {
    //     log("map", n);
    //     return delay1000(n ** 2);
    //   }),
    //   C.reduce(add),
    //   log
    // );

    _.go(
      [1, 2, 3, 4, 5, 6, 7, 8, 9],
      L.map((n) => {
        log("map", n);
        return delay1000(n ** 2);
      }),
      L.filter((n) => {
        log("filter", n);
        return delay1000(n % 2);
      }),
      L.map((n) => {
        log("map", n);
        return delay1000(n ** 2);
      }),
      C.take(2),
      _.reduce(add),
      log
    );
  </script>
</body>
